# Hardware
Description of PCB and other hardware components needed 

## PCB Bill Of Materials
Prices are listed for 1 component as of 23MAY2021 from links provided

| Item Symbol | Part number | Usage | Quantity | Price (Unit) | Link |
| ----------- | ----------- | ----- | -------- | ------------ | ---- |
| C1 | 100u (1210) | Decoupling | 1 | $0.19 | [Link](https://www.digikey.com/en/products/detail/cal-chip-electronics-inc/GMC32X5R107M6R3NT/12140448) |
| C2 | 1u (0402) | Decoupling | 1 | $<0.01 | [Link](https://www.digikey.com/en/products/detail/cal-chip-electronics-inc/GMC04X5R105K10NT/12324831) |
| C3, C4 | 2.2u (0603) | Decoupling | 2 | $<0.01 | [Link](https://www.digikey.com/en/products/detail/cal-chip-electronics-inc/GMC10X5R225K16NT/13908834) |
| C5 | 22n (0603) | Decoupling | 1 | $0.12 | [Link](https://www.digikey.com/en/products/detail/samsung-electro-mechanics/CL10B223KC8WPNC/11487758) |
| C6, C11, C12, C14 | 0.1u (0603) | Decoupling | 4 | $<0.01 | [Link](https://www.digikey.com/en/products/detail/cal-chip-electronics-inc/GMC10Y5V104Z16NTD/13907945) |
| C7, C8 | 47u (1210) | Decoupling | 2 | $<0.01 | [Link](https://www.digikey.com/en/products/detail/cal-chip-electronics-inc/GMC32X5R476M6R3NT/14288292) |
| C9, C10, C13, C15-20 | 10u (0603) | Decoupling | 9 | $0.02 | [Link](https://www.digikey.com/en/products/detail/cal-chip-electronics-inc/GMC10X5R106M6R3NT/13908308) |
| D1 | RB088BM-60TL | Reverse Polarity Protection | 1 | $1.01 | [Link](https://www.digikey.com/en/products/detail/rohm-semiconductor/RB088BM-60TL/13532505?s=N4IgTCBcDaIEoCEAMAOFCCyBaAbEgKgDIgC6AvkA) |
| D2 | TPSMA6L15A | TVS Diode | 1 | $0.43 | [Link](https://www.mouser.com/ProductDetail/Littelfuse/TPSMA6L15A?qs=%2Fha2pyFadugfGnmmqVIyK0pqz6QsBq4qayHoj9Sl4pBtoAfgRESDsA%3D%3D) |
| D3 | VSSAF512-M3/H | Switch mode power supply | 1 | $0.37 | [Link](https://www.mouser.com/ProductDetail/Vishay-General-Semiconductor/VSSAF512-M3-H?qs=Vcr9%2FL0R50i0n4n9iaJXuQ%3D%3D) |
| D4, D5 | TPSMB15A | CAN BUS ESD protection | 2 | $0.51 | [Link](https://www.mouser.com/ProductDetail/Littelfuse/TPSMB15A?qs=rXmh1mW8ce0d2DkAI15E9g%3D%3D) |
| D6 | B5818WS-F2-0000HF | USB reverse polarity protection | 1 | $0.03 | [Link](https://www.digikey.com/en/products/detail/yangzhou-yangjie-electronic-technology-co-ltd/B5818WS-F2-0000HF/13911526) |
| D7, D8 | 150040RS73240 | Indicator LEDs | 2 | $0.30 | [Link](https://www.digikey.com/en/products/detail/w%C3%BCrth-elektronik/150040RS73240/8557156) |
| F1 | 3413.0330.22 | Main fuse | 1 | $0.52 | [Link](https://www.digikey.com/en/products/detail/schurter-inc/3413-0330-22/2644179?s=N4IgTCBcDaIMwBYCMcB0AGOd2rBAugL5A) |
| J2 | 5063N17 | DB-9 connector for CANBUS | 1 | $2.08 | [Link](https://www.mcmaster.com/db9-connectors/computer-connection-type~db9/) |
| J3 | 47590-0001 | USB Connector | 1 | $0.74 | [Link](https://www.mouser.com/ProductDetail/Molex/47590-0001?qs=B2dI1vFk2x%252BDCUfk3sC4bA%3D%3D) |
| L1 | SRR1208-6R5ML | Inductor for Swich mode power supply | 1 | $1.01 | [Link](https://www.mouser.com/ProductDetail/Bourns/SRR1208-6R5ML?qs=%2Fha2pyFadui2eD47bk8gw5fVfN0Y3hSDheYnbTh0oyJiz%2Fx47BaQ5A%3D%3D) |
| Q1, Q2 | SS8050-G | BJTs for boot mode | 2 | $0.26 | [Link](https://www.digikey.com/en/products/detail/comchip-technology/SS8050-G/6138901) |
| R1 | 49.9K (0603)  | Switch mode power supply | 1 | $<0.01 | [Link](https://www.digikey.com/en/products/detail/viking-tech/AR03DTC4992/12141691) |
| R2 | 100K (0603) | Switch mode power supply | 1 | $<0.01 | [Link](https://www.digikey.com/en/products/detail/viking-tech/CR-03FL7-100K/12141977) |
| R3 | 17.8K (0603) | Switch mode power supply | 1 | $<0.01 | [Link](https://www.digikey.com/en/products/detail/meritek/CR161782F/13405853) |
| R4, R5, R8, R10, R12, R14 | 10K (0603) | Various | 6 | $<0.01 | [Link](https://www.digikey.com/en/products/detail/viking-tech/CR-03FL7-10K/12141843) |
| R6 | 120 (0603) | CAN BUS Termination | 1 | $<0.01 | [Link](https://www.digikey.com/en/products/detail/meritek/CR16121J/13407570) |
| R7 | 4.7K (0603)  | USB Interface reset | 1 | $<0.01 | [Link](https://www.digikey.com/en/products/detail/meritek/CR16472J/13408047) |
| R9, R11, R13 | 27K (0603) | Voltage divider | 3 | $<0.01 | [Link](https://www.digikey.com/en/products/detail/meritek/CR16273J/13411248) |
| R15, R16 | 2.2k (0603) | LED Current limiting | 2 | $<0.01 | [Link](https://www.digikey.com/en/products/detail/meritek/CR16222J/13408118) |
| U1 | ESP-WROOM-32E (16MB) | Control device | 1 | $2.99 | [Link](https://www.mouser.com/ProductDetail/Espressif-Systems/ESP32-WROOM-32EM113EH2800PH3Q0?qs=%2Fha2pyFadugKGKyA%252BZergyIlFBtNph37e6RNd2AooXgpguQzeKw%2F9XD7SQbNVdv%252BteSZ4t6A0C4%3D) |
| U2 | LMR14030-Q1 | 12-5v Switching regulator | 1 | $3.06 | [Link](https://www.mouser.com/ProductDetail/Texas-Instruments/LMR14030SQDDARQ1?qs=8%2FmU9qzJpL%2F%252BPjY7azHSnQ%3D%3D) |
| U3 | NCP1117ST33T3G | 5-3.3v LDO | 1 | $0.56 | [Link](https://www.mouser.com/ProductDetail/ON-Semiconductor/NCP1117ST33T3G?qs=Gev%252BmEvV0iZb%2FE8ahUDx3w%3D%3D) |
| U4 | TXB0108DQSR | 3.3-5v Level shifter | 1 | $1.36 | [Link](https://www.digikey.com/en/products/detail/texas-instruments/TXB0108DQSR/2260592) |
| U5 | SN65HVD230 | CAN-bus Tranceiver | 1 | $3.00 | [Link](https://www.mouser.com/ProductDetail/Texas-Instruments/SN65HVD230QDRG4Q1?qs=pZC5fsuWujFPbC0sa1rjKA%3D%3D) |
| U6 | USBLC6-2SC6 | USB protection IC | 1 | $0.61 | [Link](https://www.mouser.com/ProductDetail/STMicroelectronics/USBLC6-2SC6?qs=po45yt2pPpu%2FhNIlwQdTlg%3D%3D) |
| U7 | CP2102N-A01-GQFN28 | USB Interface IC | 1 | $1.51 | [Link](https://www.mouser.com/ProductDetail/Silicon-Labs/CP2102N-A02-GQFN28?qs=%2Fha2pyFadugXX01mIBNMiGoWrTn6var09lY6AXHRy1EbBOYuOjOc%2FKTdb43lrfzk) |

## External electrical compentents
| Part name/number | Description | QTY | Price (unit) | Link |
| ---------------- | ----------- | --- | -------------| ---- |
| OBD2 Cable | Cable from OB2 Port of Car to device | 1 | $9.95 | [Link](https://www.digikey.com/catalog/en/partgroup/obd-ii-to-db9-cable/57744#:~:text=This%20cable%20allows%20you%20to,the%20cable%20is%20five%20feet.) |
| LEDS |
| Joystick | Generic Joystick w/ pushbutton used for navigation of the menus | 1 | $1.00 | [Link](https://www.amazon.com/Wishiot-Joystick-Controller-Breakout-Arduino/dp/B089VXPHDH/ref=sr_1_1?dchild=1&keywords=joystick+with+button+arduino&qid=1621910213&sr=8-1) |
| OLED 0.96" | SSD1306, SPI screen for displaying information | 1 | $5.00 | [Link](https://www.amazon.com/CenryKay-0-96inch-Display-Compatible-Microcontroller/dp/B08238DZDL/ref=sr_1_2?crid=1C6Y8VA08BYD8&dchild=1&keywords=0.96+oled+spi&qid=1621910148&sprefix=0.96%2Caps%2C161&sr=8-2) |
| Power switch |
| Cable |

## Case
TODO

## Pinout
Last verified on ver 1.3.0
| Item | Pin | Restrictions |
| ---- | --- | ------------ |
| LED SPARE 1 | 2 | No |
| LED Data (right) | 4 | No |
| LED Data (front) | 5 | No |
| OLED DC | 12 | No |
| OLED Reset | 14 | No |
| LED SPARE 2 | 15 | No |
| LED Data (rear) | 16 | No |
| LED Data (left) | 17 | No |
| OLED CLK | 18 | Hardware locked |
| SPI MISO | 19 | Hardware locked |
| Aux | 21 | Analog |
| Joystick Button | 22 | Needs internal pullup |
| SPI MOSI | 23 | Hardware locked |
| CAN TX | 25 | No |
| OLED CS | 26 | No |
| Brake Input | 32 | Input only | 
| CAN RX | 33 | No |
| Turn signal input Left | 34 | Input only |
| Turn Signal input Right | 35 | Input only | 
| Joystick X | 36 | Analog |
| Joystick Y | 39 | Analog |

## Notes
### Power
Vehicle power systems are generously described as "Hostile". So, there needs to be a system in place to get the power to everything. The voltage ranges from 11-14V and 10A typically, but there's spikes. Using a Trasient-Voltage-Suppression Diode, these problems are mitigatred.

12V is sent straight to LED strips via thick trace, an dimmediately regulated down to 5v, which is copper layer 3.

3.3v is moslty routed via layer 4, since it's spidering around the board.

### Misc
Screen D0 is CLK, D1 is MOSI.

Joystick is oriented with headers up.
- Y Axis pot is HIGH when DOWN, LOW when UP
- X Axis pot is HIGH when LEFT, LOW when RIGHT

May want to reorient for ease of mounting.

Pin 33 spazzes on software load. 
